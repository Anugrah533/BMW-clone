var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(d){var f=0;return function(){return f<d.length?{done:!1,value:d[f++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.makeIterator=function(d){var f="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];return f?f.call(d):$jscomp.arrayIterator(d)};var grpw;
(function(d){(function(f){var e=function(){};e.prototype.init=function(a,b){this.baseUseClass=b;this.jqComponent=$(a);this.id=this.jqComponent[0].id;this.result=this.jqComponent.find(".grp-newsfilter-search-result");this.searchField=this.jqComponent.find(".grp-newsfilter-search");this.requestUrl=document.location.href;this.searchSubmit=this.jqComponent.find(".grp-newsfilter-search-icon");this.topicButton=this.jqComponent.find(".grp-newsarticle-topicbutton");this.loadMoreButton=this.jqComponent.find(".grp-load-more");
this.resetLink=this.jqComponent.find(".grp-reset");this.resultCountText=this.jqComponent.find(".grp-newsfilter-no-result");this.counter=1;this.selectedSearch=this.selectedTopic="";this.articleCounter=this.jqComponent.find(".grp-articleCounter");this.articleCounterValue=this.articleCounter.val().toString();a=window.location.search;null!=a&&(a=a.slice(1).split("\x26"),this.newsSetSelectedTopic(a));this.resultcount()};e.prototype.initEventHandlers=function(){var a=this,b=this.jqComponent.find(".grp-toggle-button");
b.on("click",function(){a.newsfilterToggle(b.data("id"))});this.topicButton.on("click",function(c){a.topicButton.removeClass("selected");$(c.currentTarget).addClass("selected");c.preventDefault();a.applySearch()});this.loadMoreButton.on("click",function(c){c.preventDefault();a.counter+=1;a.applySearch()});this.searchSubmit.on("click",function(c){c.preventDefault();a.applySearch()});this.resetLink.on("click",function(c){c.preventDefault();a.searchField.val("");a.topicButton.removeClass("selected");
a.counter=1;a.loadMoreButton.show();a.requestContent("","")});this.searchField.on("keypress",function(c){"Enter"===c.key&&a.applySearch()})};e.prototype.applySearch=function(){var a="",b=this.jqComponent.find(".grp-newsarticle-topicbutton.selected");0<b.length&&(a=b.attr("data-value"));this.requestContent(this.searchField.val()?this.searchField.val().toString().trim():"",a)};e.prototype.requestContent=function(a,b){var c=this;a=this.getRequestString(a,b);$.ajax({url:a}).done(function(g){var h=c.jqComponent.find(".grp-newsfilter-result-area");
h.html("");g=$(g);h.html(g.find(".grp-newsfilter-result-area").html());c.articleCounter=g.find(".grp-articleCounter");c.articleCounterValue=c.articleCounter.val().toString();c.resultcount()})};e.prototype.resultcount=function(){var a=this.jqComponent.find(".grp-newsteaser").length;this.newsCalcResultCount(a)};e.prototype.getRequestString=function(a,b){return this.newsGetRequestUrl(this.requestUrl,a,b,this.counter)};e.prototype.newsfilterToggle=function(a){var b="#"+a+" .grp-toggle-button";a="#"+a+
" .grp-newsfilter-area";$(b).hasClass("opened")?($(b).removeClass("opened"),$(a).removeClass("opened")):($(b).addClass("opened"),$(a).addClass("opened"))};e.prototype.newsGetRequestUrl=function(a,b,c,g){0<a.indexOf("?")&&(a=a.substr(0,a.indexOf("?")));b=b?encodeURIComponent(b):"";c=c?encodeURIComponent(c):"";0<b.length&&(b="/text\x3d"+b);0<c.length&&(c="/topic\x3d"+c);return a+b+c+"/counter\x3d"+g};e.prototype.newsCalcResultCount=function(a){1>a?this.resultCountText.get(0).style.display="block":this.resultCountText.get(0).style.display=
"none";a===parseInt(this.articleCounterValue)&&this.loadMoreButton.hide()};e.prototype.newsSetSelectedTopic=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,b.startsWith("topic")&&(b=b.split("\x3d"),1<b.length&&(b=decodeURI(b[1]),this.requestContent("",b),this.newsfilterToggle(this.id),this.jqComponent.find('a[data-value\x3d"'+b+'"]').addClass("selected")))};f.NewsFilter=e})(d.component||(d.component={}))})(grpw||(grpw={}));