var grpw;
(function (grpw) {
    var component;
    (function (component_1) {
        class ContainerRoot {
            constructor() {
            }
            init(component, baseUseClass) {
                this.baseUseClass = baseUseClass;
                this.jqSectionHeadlineComponents = $('.title > .cmp-title-h2-section');
                this.jqSectionLayer = $('.grp-container-root__section-layer');
                this.jqSectionLayerContent = this.jqSectionLayer.find('.grp-container-root__section-list').first();
            }
            initEventHandlers() {
                this.jqSectionHeadlineComponents.on('click', () => {
                    this.createLayerContent();
                    this.jqSectionLayer.addClass('show').css('opacity', '0.95');
                    const jqBody = $('html, body');
                    jqBody.stop().animate({ scrollTop: 0 }, 500, 'swing');
                    setTimeout(() => {
                        $('.grp-container-root__section-item')
                            .css('transform', '');
                    }, ContainerRoot.ANIMATION_DURATION);
                });
                this.jqSectionLayer.after().on('click', () => {
                    this.jqSectionLayer.css('opacity', 0);
                    setTimeout(() => {
                        this.jqSectionLayer.removeClass('show');
                    }, ContainerRoot.ANIMATION_DURATION);
                });
            }
            createLayerContent() {
                this.jqSectionLayerContent.empty();
                this.jqSectionHeadlineComponents.each((index, element) => {
                    const jqElem = $(element);
                    const id = jqElem.attr('id');
                    const y = jqElem.offset().top
                        - $('.header').height()
                        + ($('.grp-container-root__section-layer .cmp-container').height() / 2)
                        - 20;
                    const itemText = jqElem.find('h2').html();
                    const jqSectionItem = $('<div/>')
                        .addClass('grp-container-root__section-item')
                        .attr('data-hash', id)
                        .css('transform', `translateY(${y}px)`);
                    $('<div/>').html(itemText)
                        .addClass('grp-h2')
                        .appendTo(jqSectionItem);
                    jqSectionItem.on('click', () => {
                        this.jqSectionLayer.css('opacity', 0);
                        const gotoId = jqSectionItem.attr('data-hash');
                        const $section = $(`#${gotoId}`);
                        const scrollPos = $section.offset().top;
                        setTimeout(() => {
                            this.jqSectionLayer.removeClass('show');
                            $('html, body').stop().animate({
                                scrollTop: scrollPos,
                            }, 1000);
                        }, ContainerRoot.ANIMATION_DURATION);
                    });
                    this.jqSectionLayerContent.append(jqSectionItem);
                });
            }
        }
        ContainerRoot.ANIMATION_DURATION = 750;
        component_1.ContainerRoot = ContainerRoot;
    })(component = grpw.component || (grpw.component = {}));
})(grpw || (grpw = {}));
